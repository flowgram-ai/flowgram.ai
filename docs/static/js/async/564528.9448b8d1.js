"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["564528"],{824046:function(e,s,i){i.r(s),i.d(s,{default:()=>x});var r=i("110239"),n=i("444827");let d=i.p+"static/image/variable-engine-structure.61f2681f.png",a=i.p+"static/image/varaible-zone.4eb441b6.png",l=i.p+"static/image/variable-type1.043500d5.png",c=i.p+"static/image/variable-type2.e5105a8b.png";function h(e){let s=Object.assign({h1:"h1",a:"a",h2:"h2",h3:"h3",div:"div",p:"p",ul:"ul",li:"li",img:"img",h4:"h4"},(0,n.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"变量引擎",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量引擎",children:"#"}),"变量引擎"]}),"\n",(0,r.jsxs)(s.h2,{id:"整体设计",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#整体设计",children:"#"}),"整体设计"]}),"\n",(0,r.jsxs)(s.h3,{id:"架构分层",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#架构分层",children:"#"}),"架构分层"]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"架构分层"}),(0,r.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,r.jsx)(s.p,{children:"\n变量引擎设计上遵循 DIP（依赖反转）原则，按照 代码稳定性、抽象层次 以及和 业务的远近 分为三层："}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"变量抽象层：变量架构中抽象层次最高，代码也最为稳定的部分"}),"\n",(0,r.jsx)(s.li,{children:"变量实现层：变量架构中变动较大，不同业务之间通常存在调整的部分"}),"\n",(0,r.jsx)(s.li,{children:"变量业务层：变量架构中提供给业务的 Facade ，与画布引擎、节点引擎联动的部分"}),"\n"]})]})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"架构分层图",src:d})}),"\n",(0,r.jsxs)(s.h3,{id:"术语表",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#术语表",children:"#"}),"术语表"]}),"\n",(0,r.jsxs)(s.h4,{id:"-作用域scope",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#-作用域scope",children:"#"}),"\uD83C\uDF1F 作用域（Scope）"]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"⭐️⭐️⭐️ 定义："}),(0,r.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,r.jsx)(s.p,{children:"\n一种约定的空间，空间内 通过 AST 来描述变量声明和消费情况"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["约定的空间：空间是什么，完全由业务定义","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"在低代码设计态中，可以是一个节点、一个组件、一个右侧面板..."}),"\n",(0,r.jsx)(s.li,{children:"在一段代码中，可以是一行 Statement、一段代码块、一个函数、一个文件..."}),"\n"]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.p,{children:"作用域的空间是什么？可以由不同的业务来划定。"}),"\n",(0,r.jsxs)(s.h4,{id:"-抽象语法树ast",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#-抽象语法树ast",children:"#"}),"\uD83C\uDF1F 抽象语法树（AST）"]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"定义："}),(0,r.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,r.jsx)(s.p,{children:"\n⭐️⭐️⭐️ 一种协议，通过树的形式，组合 AST 节点，实现对变量信息的显式/隐式 CRUD"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"AST 节点：AST 中可响应式的协议节点"}),"\n",(0,r.jsx)(s.li,{children:"显式 CRUD，如：业务显示设定一个变量的变量类型"}),"\n",(0,r.jsx)(s.li,{children:"隐式 CRUD，如：业务声明一个变量，变量会根据其初始化参数自动推导变量类型"}),"\n"]})]})]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"作用域里面的变量、类型、表达式、结构体 等等变量信息... 本质上都是 AST 节点的组合"}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"变量 -> VariableDeclaration 节点"}),"\n",(0,r.jsx)(s.li,{children:"表达式 -> Expression 节点"}),"\n",(0,r.jsx)(s.li,{children:"类型 -> TypeNode 节点"}),"\n",(0,r.jsx)(s.li,{children:"结构体 -> StructDeclaration 节点"}),"\n"]})})]}),"\n",(0,r.jsxs)(s.p,{children:["参考链接：",(0,r.jsx)(s.a,{href:"https://ts-ast-viewer.com/",rel:"noopener noreferrer",target:"_blank",children:"https://ts-ast-viewer.com/"})]}),"\n",(0,r.jsxs)(s.h4,{id:"变量variable",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量variable",children:"#"}),"变量（Variable）"]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"定义："}),(0,r.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,r.jsx)(s.p,{children:"\n一种用于声明新变量的 AST 节点，通过唯一标识符 指向一个 在特定集合范围内变动的值"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"在特定集合范围内变动的值：变量的值必须在 变量类型 描述的范围内"}),"\n",(0,r.jsx)(s.li,{children:"唯一标识符：变量必须有一个唯一的 Key 值"}),"\n"]})]})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"/zh/guide/index/assets/variable-code.png.html",children:"JavaScript中的变量，唯一 Key + 指向一个变动的值"})}),"\n",(0,r.jsxs)(s.h4,{id:"变量类型variable-type",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量类型variable-type",children:"#"}),"变量类型（Variable Type）"]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"定义："}),(0,r.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,r.jsx)(s.p,{children:"\n⭐️⭐️⭐️ 一种 AST 节点，用于约束一个变量，被约束的变量值只能在预先设定的集合范围内变动"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"一个变量可以绑定一个变量类型"}),"\n"]})]})]}),"\n",(0,r.jsx)("table",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("img",{src:l})}),(0,r.jsx)("td",{children:(0,r.jsx)("img",{src:c})})]})}),"\n",(0,r.jsxs)(s.h3,{id:"变量引擎的形象理解",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量引擎的形象理解",children:"#"}),"变量引擎的形象理解"]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"想像这样一个变量引擎的世界："}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"通过一个个 作用域 来划定出一个个 国家"}),"\n",(0,r.jsx)(s.li,{children:"每个国家包含三大公民：声明、类型、表达式"}),"\n",(0,r.jsx)(s.li,{children:"国家与国家之间通过 作用域链 来实现交流"}),"\n"]})})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"图解",src:a})})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,n.ah)(),e.components);return s?(0,r.jsx)(s,Object.assign({},e,{children:(0,r.jsx)(h,e)})):h(e)}let x=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["zh%2Fguide%2Findex%2Fvariable-engine.mdx"]={toc:[{id:"整体设计",text:"整体设计",depth:2},{id:"架构分层",text:"架构分层",depth:3},{id:"术语表",text:"术语表",depth:3},{id:"-作用域scope",text:"\uD83C\uDF1F 作用域（Scope）",depth:4},{id:"-抽象语法树ast",text:"\uD83C\uDF1F 抽象语法树（AST）",depth:4},{id:"变量variable",text:"变量（Variable）",depth:4},{id:"变量类型variable-type",text:"变量类型（Variable Type）",depth:4},{id:"变量引擎的形象理解",text:"变量引擎的形象理解",depth:3}],title:"变量引擎",frontmatter:{}}}}]);